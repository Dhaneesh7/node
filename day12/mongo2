const MongoClient = require('mongodb').MongoClient;
const ObjectId = require('mongodb').ObjectId;
const url = "mongodb://localhost:27017/";
const dbName = "student";





app.get('/students/paginated', function (req, res) => {
  const page = parseInt(req.query.page) || 1;
  const limit = parseInt(req.query.limit) || 5;
  const skip = (page - 1) * limit;

  
    const students = dbo.Student.find({}, { name: 1, age: 1, _id: 0 })
      .skip(skip)
      .limit(limit);
    
    const total = dbo.Student.countDocuments();

    res.json({
      currentPage: page,
      totalPages: Math.ceil(total / limit),
      totalStudents: total,
      students
    });
});

app.delete('/students/drop', async (req, res) => {
  
    dboStudent.collection.drop();
    res.json({ message: 'Student collection dropped' });
  
   /* res.status(500).json({ error: 'Collection drop failed or already dropped' });
  */
});
